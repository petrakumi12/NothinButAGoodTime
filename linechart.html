<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Line Chart</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
<script>
    console.log(d3);

    let margin = {top: 20, right: 20, bottom: 20, left: 20},
        width = 900 - margin.left - margin.right,
        height = 600 - margin.top - margin.bottom;

    let svg = d3.select("body")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    let data = [];
    let datadict = {};
    let min = 100, max = -100;
    let generateTS = () => {
        let tempData = Array(50001);
        tempData[0] = 0;
        for (let i = 1; i <= 50000; i++) {
            let diff = Math.random() - 0.5;
            tempData[i] = tempData[i - 1] + diff;

            if (tempData[i] > max) {
                max = tempData[i]
            } else if (tempData[i] < min) {
                min = tempData[i]
            }
        }
        return tempData;
    };

    let data1 = generateTS();
    data = generateTS();

    // TODO comment for 1 TS, uncomment for array of TS
    // data = []
    // for (let j = 0; j < 2; j++) {
    //     console.log("before", data)
    //     data.push(generateTS())
    //     console.log("after", data)
    // }

    // console.log("abcdefg", data1.map((d, i) => {return d - data[0][i]}))
    // console.log(data[0])
    // console.log(data1)


    console.log("data", data)
    console.log(min, max)

    var x = d3.scaleLinear()
        .domain([0, data.length])
        .range([0, width]);

    let y = d3.scaleLinear()
        .domain([min, max])
        .range([height - margin.top - margin.bottom, 0]);

    console.log(y.domain(), y(-20), y(0), y(20));

    let line = d3.line()
        .x((d, i) => {return x(i)})
        .y((d) => {return y(d)});

    svg.append("g")
        .attr("id", "xAxis")
        .attr("transform", "translate(0," + (height - margin.top - margin.bottom) + ")")
        .call(d3.axisBottom(x));

    svg.append("g")
        .attr("id", "yAxis")
        .call(d3.axisLeft(y));

    // console.log("whyyyy", data)
    // TODO using .data().enter(), takes a single TS
    svg.append("g")
        .data([data])
        .enter()
        .append("circle")
        // .datum(d => {return d})
        // .attr("d", line)
        .attr("cx", 450)
        .attr("cy", 200)
        .attr("r", d => {console.log("meee, d");console.log(d)})
        .style("stroke", d => {console.log("eee", d, "ooo");return "steelblue"})
        .style("stroke-width", 2)
        .style("fill", "steelblue")
        .style("opacity", 1)
    // console.log("mmmmm")

    // TODO using .data().enter(), takes an array of TSs
    // svg.append("g")
    //     .data(data)
    //     .enter()
    //     .append("circle")
    //     // .datum(d => {return d})
    //     // .attr("d", line)
    //     .attr("cx", 450)
    //     .attr("cy", 200)
    //     .attr("r", d => {console.log("meee, d");console.log(d)})
    //     .style("stroke", d => {console.log("eee", d, "ooo");return "steelblue"})
    //     .style("stroke-width", 2)
    //     .style("fill", "steelblue")
    //     .style("opacity", 1)

    // console.log(data[0])
    // TODO single path at a time, takes an array of TSs
    // svg.append("path")
    //     .datum(data[0])
    //     .attr("d", line)
    //     .style("stroke", d => {console.log("yeee");return "steelblue"})
    //     .style("stroke-width", 2)
    //     .style("fill", "none")
    //     .style("opacity", 1)

    // TODO single path at a time, takes a single TS
    // svg.append("path")
    //     .datum(data)
    //     .attr("d", line)
    //     .style("stroke", d => {console.log("yeee");return "steelblue"})
    //     .style("stroke-width", 2)
    //     .style("fill", "none")
    //     .style("opacity", 1)

</script>
</body>
</html>